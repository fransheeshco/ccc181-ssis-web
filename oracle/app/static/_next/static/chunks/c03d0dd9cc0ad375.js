(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78364,e=>{"use strict";e.s(["AuthContext",()=>t,"useAuth",()=>o]);var r=e.i(30677);let t=(0,r.createContext)({user:null,isAuthenticated:!1,loading:!0,login:async()=>{},register:async()=>{},logout:async()=>{},refreshUser:async()=>{}}),o=()=>(0,r.useContext)(t)},5396,e=>{"use strict";e.s(["ClientAuthWrapper",()=>i],5396);var r=e.i(92095),t=e.i(30677),o=e.i(78364);let s=e.i(99573).default.create({baseURL:"/api/users",withCredentials:!0,headers:{"Content-Type":"application/json"}}),a=e=>{let{children:a}=e,[i,n]=(0,t.useState)(null),[l,u]=(0,t.useState)(!0),c=async()=>{try{let{data:e}=await s.post("/token/refresh");console.log("REFRESH RESPONSE DATA:",e),n(e.user)}catch(r){var e;(null==(e=r.response)?void 0:e.status)!==401&&console.error("Failed to refresh user session:",r),n(null)}finally{u(!1)}},d=async(e,r)=>{u(!0);try{let t=await s.post("/login",{email:e,password:r});console.log("âœ… Login response:",t.data),await new Promise(e=>setTimeout(e,100)),await c()}catch(e){var t,o;if(console.error("Login failed:",e),(null==(t=e.response)?void 0:t.status)===401)throw Error("Invalid email or password");if((null==(o=e.response)?void 0:o.status)===400)throw Error("Invalid request data");throw Error("Login failed. Please try again.")}finally{u(!1)}},h=async(e,r,t)=>{u(!0);try{await s.post("/register",{username:e,email:r,password:t})}catch(e){var o,a;if(console.error("Register failed:",e),(null==(o=e.response)?void 0:o.status)===401)throw Error("Invalid email or password");if((null==(a=e.response)?void 0:a.status)===400)throw Error("Invalid request data");throw Error("Registration failed. Please try again.")}finally{u(!1)}},f=async()=>{u(!0);try{await s.post("/logout")}catch(e){console.error("Logout failed:",e)}finally{n(null),u(!1),window.location.href="/"}};return(0,t.useEffect)(()=>{c()},[]),(0,r.jsx)(o.AuthContext.Provider,{value:{user:i,isAuthenticated:!!i,loading:l,login:d,register:h,logout:f,refreshUser:c},children:a})};function i(e){let{children:t}=e;return(0,r.jsx)(a,{children:t})}}]);