(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12628,e=>{"use strict";e.s(["Label",()=>n],12628);var t=e.i(92095),s=e.i(30677),r=e.i(64819),a=s.forwardRef((e,s)=>(0,t.jsx)(r.Primitive.label,{...e,ref:s,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var l=e.i(68409);function n(e){let{className:s,...r}=e;return(0,t.jsx)(a,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...r})}},94674,25318,24018,71015,e=>{"use strict";function t(e,t,s){if(!t.has(e))throw TypeError("attempted to "+s+" private field on non-instance");return t.get(e)}function s(e,s){var r=t(e,s,"get");return r.get?r.get.call(e):r.value}function r(e,t,s){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,s)}function a(e,s,r){var a=t(e,s,"set");if(a.set)a.set.call(e,r);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=r}return r}e.s(["showToast",()=>y],94674),e.s(["_",()=>s],25318),e.s(["_",()=>r],24018),e.s(["_",()=>a],71015);let l={position:"top-right",toastMsg:"ðŸ¦š TypeScript Toastify",autoCloseTime:5e3,onClose:()=>{},canClose:!0,showProgress:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,type:"default",theme:"light"};var n=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,c=new WeakMap,h=new WeakMap,m=new WeakMap,u=new WeakMap,g=new WeakMap,p=new WeakMap,v=new WeakMap,x=new WeakMap,j=new WeakMap;class f{set position(e){let t=s(this,n).parentElement;(document.querySelector('.toast-container[data-position="'.concat(e,'"]'))||(()=>{let t=document.createElement("div");return t.classList.add("toast-container"),t.dataset.position=e,document.body.append(t),t})()).append(s(this,n)),null==t||t.hasChildNodes()||t.remove()}set toastMsg(e){s(this,n).textContent=e}set autoCloseTime(e){let t;if(a(this,d,e),a(this,h,0),!1==!!e)return;let r=e=>{if(s(this,x)&&(t=null,a(this,x,!1)),null==t){t=e,a(this,u,requestAnimationFrame(r));return}if(!s(this,m)&&(a(this,h,s(this,h)+(e-t)),s(this,h)>=s(this,d)))return void this.remove();t=e,a(this,u,requestAnimationFrame(r))};a(this,u,requestAnimationFrame(r))}set canClose(e){s(this,n).classList.toggle("can-close",e),e?s(this,n).addEventListener("click",s(this,o)):s(this,n).removeEventListener("click",s(this,o))}set showProgress(e){if(s(this,n).classList.toggle("progress",e),s(this,n).style.setProperty("--progress","1"),e){let e=()=>{s(this,m)||s(this,n).style.setProperty("--progress","".concat(1-s(this,h)/s(this,d))),a(this,c,requestAnimationFrame(e))};a(this,c,requestAnimationFrame(e))}}set pauseOnHover(e){e?(s(this,n).addEventListener("mouseover",s(this,p)),s(this,n).addEventListener("mouseleave",s(this,g))):(s(this,n).removeEventListener("mouseover",s(this,p)),s(this,n).removeEventListener("mouseleave",s(this,g)))}set pauseOnFocusLoss(e){e?document.addEventListener("visibilitychange",s(this,v)):document.removeEventListener("visibilitychange",s(this,v))}set type(e){let t=s(this,n).querySelector(".toast-icon");t&&t.remove();let r=document.createElement("div");r.classList.add("toast-icon"),a(this,j,e),"default"===e||("error"===e?(r.innerHTML='\n<svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--error-secondary)" class="Type_svg"><path d="M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"></path></svg>\n',s(this,n).style.setProperty("--light_bg","var(--error-primary)"),s(this,n).style.setProperty("--dark_bg","var(--error-primary)"),s(this,n).style.setProperty("--light-border","var(--error-secondary)"),s(this,n).classList.add("error"),s(this,n).classList.remove("info"),s(this,n).classList.remove("success"),s(this,n).classList.remove("warning")):"info"===e?(r.innerHTML='\n<svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--info-secondary)" class="Type_svg"><path d="M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"></path></svg>\n',s(this,n).style.setProperty("--light_bg","var(--info-primary)"),s(this,n).style.setProperty("--dark_bg","var(--info-primary)"),s(this,n).style.setProperty("--light-border","var(--info-secondary)"),s(this,n).classList.add("info"),s(this,n).classList.remove("error"),s(this,n).classList.remove("success"),s(this,n).classList.remove("warning")):"success"===e?(r.innerHTML='\n<svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--success-secondary)" class="Type_svg"><path d="M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"></path></svg>\n',s(this,n).style.setProperty("--light_bg","var(--success-primary)"),s(this,n).style.setProperty("--dark_bg","var(--success-primary)"),s(this,n).style.setProperty("--light-border","var(--success-secondary)"),s(this,n).classList.add("success"),s(this,n).classList.remove("info"),s(this,n).classList.remove("error"),s(this,n).classList.remove("warning")):"warning"===e&&(r.innerHTML='\n<svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--warning-secondary)" class="Type_svg"><path d="M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"></path></svg>\n',s(this,n).style.setProperty("--light_bg","var(--warning-primary)"),s(this,n).style.setProperty("--dark_bg","var(--warning-primary)"),s(this,n).style.setProperty("--light-border","var(--warning-secondary)"),s(this,n).classList.add("warning"),s(this,n).classList.remove("info"),s(this,n).classList.remove("success"),s(this,n).classList.remove("error"))),s(this,n).prepend(r)}set theme(e){if("info"===s(this,j)||"success"===s(this,j)||"warning"===s(this,j)||"error"===s(this,j)){s(this,n).classList.remove("dark"),s(this,n).classList.remove("light"),"dark"===e&&s(this,n).style.setProperty("--light_color","var(--dark_color)");return}"dark"===e?(s(this,n).style.setProperty("--light_bg","var(--dark_bg)"),s(this,n).style.setProperty("--light_color","var(--dark_color)"),s(this,n).classList.add("dark")):(s(this,n).style.setProperty("--dark_bg","var(--light_bg)"),s(this,n).style.setProperty("--dark_color","var(--light_color)"),s(this,n).classList.add("light"))}remove(){void 0!==s(this,u)&&cancelAnimationFrame(s(this,u)),void 0!==s(this,c)&&cancelAnimationFrame(s(this,c));let e=s(this,n).parentElement;s(this,n).classList.remove("show"),s(this,n).addEventListener("transitionend",()=>{s(this,n).remove(),e.hasChildNodes()||e.remove()}),s(this,i).call(this)}update(e){Object.entries(e).forEach(e=>{let[t,s]=e;this[t]=s})}constructor(e){var t;r(this,n,{writable:!0,value:void 0}),r(this,o,{writable:!0,value:void 0}),r(this,i,{writable:!0,value:void 0}),r(this,d,{writable:!0,value:void 0}),r(this,c,{writable:!0,value:void 0}),r(this,h,{writable:!0,value:0}),r(this,m,{writable:!0,value:!1}),r(this,u,{writable:!0,value:void 0}),r(this,g,{writable:!0,value:void 0}),r(this,p,{writable:!0,value:void 0}),r(this,v,{writable:!0,value:void 0}),r(this,x,{writable:!0,value:!1}),r(this,j,{writable:!0,value:"default"}),a(this,n,document.createElement("div")),s(this,n).classList.add("toast"),requestAnimationFrame(()=>{s(this,n).classList.add("show")}),a(this,i,e.onClose||(()=>{})),a(this,g,()=>a(this,m,!1)),a(this,p,()=>a(this,m,!0)),a(this,v,()=>{a(this,x,"visible"===document.visibilityState)}),a(this,o,this.remove.bind(this)),this.update({...l,...e}),a(this,d,null!=(t=e.autoCloseTime)?t:l.autoCloseTime)}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";new f({position:"top-right",toastMsg:e,autoCloseTime:3e3,canClose:!0,showProgress:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,type:t,theme:"light"})}},86284,e=>{"use strict";e.s(["default",()=>T],86284);var t=e.i(92095),s=e.i(30677),r=e.i(51544),a=e.i(14891);async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.search&&(t.search=e.search),e.sortBy&&(t.sort_by=e.sortBy),e.orderBy&&(t.order=e.orderBy),void 0!==e.offset&&(t.offset=e.offset.toString()),void 0!==e.limit&&(t.limit=e.limit.toString());try{return(await a.default.get("/students/",{params:t})).data}catch(e){var s,r,l;throw console.error("API request failed:",(null==(s=e.response)?void 0:s.data)||e.message),Error((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"âŒ Failed to fetch students")}}async function n(e,t,s){var r,l,n,o,i,d,c,h,m;let{student_id:u,first_name:g,last_name:p,program_code:v,year_level:x,gender:j}=e;try{let e=new FormData;return e.append("student_id",u),e.append("first_name",g),e.append("last_name",p),e.append("program_code",v),e.append("year_level",x.toString()),e.append("gender",j),t&&e.append("photo",t),{message:(null==(r=(await a.default.post("/students/create",e,{headers:{"Content-Type":"multipart/form-data"}})).data)?void 0:r.message)||"âœ… Student created successfully"}}catch(e){throw console.error("API request failed:",(null==(n=e.response)||null==(l=n.data)?void 0:l.message)||(null==(i=e.response)||null==(o=i.data)?void 0:o.error)||e.message||"API request failed"),Error((null==(c=e.response)||null==(d=c.data)?void 0:d.error)||(null==(m=e.response)||null==(h=m.data)?void 0:h.message)||"API request failed")}}async function o(e,t){var s,r,l,n,o;let{student_id:i,first_name:d,last_name:c,program_code:h,year_level:m,gender:u,curr_code:g,remove_photo:p}=e;try{let e=new FormData;return e.append("current_student_id",g),e.append("new_student_id",i),e.append("first_name",d),e.append("last_name",c),e.append("program_code",h),e.append("year_level",m.toString()),e.append("gender",u),t&&e.append("photo",t),e.append("remove_photo",p?"true":"false"),{message:(null==(s=(await a.default.put("/students/update/".concat(g),e,{headers:{"Content-Type":"multipart/form-data"}})).data)?void 0:s.message)||"Student updated successfully"}}catch(e){throw Error((null==(l=e.response)||null==(r=l.data)?void 0:r.message)||(null==(o=e.response)||null==(n=o.data)?void 0:n.error)||e.message||"API request failed")}}async function i(e){var t,s,r,l,n,o;let{student_id:i}=e;try{let e=await a.default.delete("/students/delete/".concat(i));if(null==(t=e.data)?void 0:t.error)return{error:e.data.error};return{message:(null==(s=e.data)?void 0:s.message)||"âœ… Student deleted successfully",error:null==(r=e.data)?void 0:r.error}}catch(e){return console.error("API request failed:",(null==(l=e.response)?void 0:l.data)||e.message),{error:(null==(o=e.response)||null==(n=o.data)?void 0:n.error)||"âŒ Failed to delete program"}}}var d=e.i(55858),c=e.i(41733),h=e.i(14199),m=e.i(16798),u=e.i(84620),g=e.i(28450),p=e.i(628),v=e.i(3687),x=e.i(54007),j=e.i(94674),f=e.i(87521),y=e.i(53553);let b=h.z.object({student_id:h.z.string().regex(/^\d{4}-\d{4}$/,"ID must be in YYYY-NNNN format"),first_name:h.z.string().min(1),last_name:h.z.string().min(1),program_code:h.z.string().min(1),year_level:h.z.string().min(1),gender:h.z.string().min(1)});function w(e){let{label:r,onSuccess:a}=e,l=(0,c.useForm)({resolver:(0,d.zodResolver)(b),defaultValues:{student_id:"",first_name:"",last_name:"",program_code:"",year_level:"",gender:""}}),[o,i]=(0,s.useState)(null),[h,w]=(0,s.useState)(null),[_,S]=(0,s.useState)(!1),[F,C]=(0,s.useState)([]),[L,N]=(0,s.useState)(!1),[I,D]=(0,s.useState)(!1),[P,M]=(0,s.useState)("");async function z(){try{D(!0);let e=await (0,y.getAllPrograms)();C(e||[])}catch(e){(0,j.showToast)("Error fetching programs: ".concat(e),"warning")}finally{D(!1)}}async function T(e){try{D(!0),await n(e,null!=o?o:void 0,L),(0,j.showToast)("Student added successfully."),S(!1),l.reset(),w(null),N(!1),a&&a()}catch(e){console.error("API error:",e),M(e.message||String(e))}finally{D(!1)}}return(0,s.useEffect)(()=>{_&&z()},[_]),(0,t.jsxs)(x.Dialog,{open:_,onOpenChange:S,children:[(0,t.jsx)(x.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(g.Button,{className:" fixed bottom-4 left-4 sm:static sm:bottom-auto sm:right-auto rounded-full sm:rounded-md h-14 w-14 sm:h-auto sm:w-auto p-0 sm:px-4 sm:py-2 shadow-lg sm:shadow-none flex items-center justify-center gap-2 ",children:[(0,t.jsx)(m.Plus,{className:"h-6 w-6 sm:h-5 sm:w-5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:r})]})}),(0,t.jsxs)(x.DialogContent,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"Add Student"}),(0,t.jsx)(x.DialogDescription,{children:"Fill in the form to add a new student."})]}),(0,t.jsx)(p.Form,{...l,children:(0,t.jsxs)("form",{onSubmit:l.handleSubmit(T),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(p.FormLabel,{children:"Photo"}),h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:h,alt:"Preview",className:"w-32 h-32 rounded-full object-cover border"}),(0,t.jsx)(g.Button,{type:"button",variant:"outline",className:"text-red-600 border-red-400",onClick:()=>{i(null),w(null),N(!0)},children:"Remove Photo"})]}):(0,t.jsx)("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-600",children:"No Photo"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsxs)("label",{className:"cursor-pointer px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[o?o.name:"Upload Photo",(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t;let s=(null==(t=e.target.files)?void 0:t[0])||null;i(s),s?w(URL.createObjectURL(s)):w(null)},className:"hidden"})]})})]}),(0,t.jsx)(p.FormField,{control:l.control,name:"student_id",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"ID Number"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter ID number",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:l.control,name:"first_name",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"First Name"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter first name",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:l.control,name:"last_name",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Last Name"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter last name",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:l.control,name:"program_code",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Program"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsxs)(f.Select,{onValueChange:s.onChange,value:s.value,disabled:I,children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select a program"})}),(0,t.jsx)(f.SelectContent,{children:F.map(e=>(0,t.jsxs)(f.SelectItem,{value:e.program_code,children:[e.program_code," â€” ",e.program_name]},"".concat(e.program_code,"-").concat(e.program_name)))})]})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:l.control,name:"year_level",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Year Level"}),(0,t.jsxs)(f.Select,{onValueChange:s.onChange,defaultValue:s.value,disabled:I,children:[(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select year level"})})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"1",children:"1st Year"}),(0,t.jsx)(f.SelectItem,{value:"2",children:"2nd Year"}),(0,t.jsx)(f.SelectItem,{value:"3",children:"3rd Year"}),(0,t.jsx)(f.SelectItem,{value:"4",children:"4th Year"}),(0,t.jsx)(f.SelectItem,{value:"4+",children:"4th+ Year"})]})]}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:l.control,name:"gender",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Gender"}),(0,t.jsxs)(f.Select,{onValueChange:s.onChange,defaultValue:s.value,disabled:I,children:[(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select gender"})})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"Male",children:"Male"}),(0,t.jsx)(f.SelectItem,{value:"Female",children:"Female"}),(0,t.jsx)(f.SelectItem,{value:"Other",children:"Other"})]})]}),(0,t.jsx)(p.FormMessage,{})]})}}),P&&(0,t.jsx)("p",{className:"text-red-600 text-sm font-medium",children:P}),(0,t.jsx)(x.DialogFooter,{children:(0,t.jsxs)(g.Button,{type:"submit",disabled:I,className:"flex items-center gap-2 justify-center",children:[I&&(0,t.jsx)(u.Loader2,{className:"animate-spin h-4 w-4"}),I?"Loading...":"Submit"]})})]})})]})]})}var _=e.i(79683);let S=h.z.object({student_id:h.z.string().regex(/^\d{4}-\d{4}$/,"ID must be in YYYY-NNNN format"),first_name:h.z.string().min(1),last_name:h.z.string().min(1),program_code:h.z.string().min(1),year_level:h.z.string().min(1),gender:h.z.string().min(1),curr_code:h.z.string().min(1)});function F(e){let{student:r,onSuccess:a}=e,[l,n]=(0,s.useState)(null),[i,h]=(0,s.useState)(null),[m,b]=(0,s.useState)(!1),[w,_]=(0,s.useState)(!1),[F,C]=(0,s.useState)(null),[L,N]=(0,s.useState)(!1),[I,D]=(0,s.useState)([]),[P,M]=(0,s.useState)(""),[z,T]=(0,s.useState)(!1),k=(0,c.useForm)({resolver:(0,d.zodResolver)(S),defaultValues:{student_id:"",first_name:"",last_name:"",program_code:"",year_level:"",gender:"",curr_code:""}});async function E(){try{N(!0);let e=await (0,y.getAllPrograms)();D(e||[])}catch(e){(0,j.showToast)("Error fetching programs: ".concat(e),"warning")}finally{N(!1)}}async function A(e){try{N(!0);let t={...e,curr_code:r.student_id,remove_photo:z};await o(t,null!=l?l:void 0),(0,j.showToast)("Student edited successfully.","success"),b(!1),_(!1),C(null),null==a||a()}catch(e){M(e.message||String(e))}finally{N(!1)}}(0,s.useEffect)(()=>{m&&E()},[m]),(0,s.useEffect)(()=>{r&&m&&(k.reset({student_id:r.student_id,first_name:r.first_name,last_name:r.last_name,program_code:r.program_code,year_level:r.year_level,gender:r.gender,curr_code:r.student_id}),h(null),n(null),T(!1))},[r,m,k]);let B=i||!z&&r.photo_url||"https://gromnlgzvpnkbzlvefrw.supabase.co/storage/v1/object/public/student_photos/defaultphoto.jpg";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Dialog,{open:m,onOpenChange:b,children:[(0,t.jsx)(x.DialogTrigger,{asChild:!0,className:"m-2",children:(0,t.jsx)("div",{children:"Edit"})}),(0,t.jsxs)(x.DialogContent,{className:"max-w-md max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"Edit Student"}),(0,t.jsx)(x.DialogDescription,{children:"Fill in the form to edit student information."})]}),(0,t.jsx)(p.Form,{...k,children:(0,t.jsxs)("form",{onSubmit:k.handleSubmit(function(e){C(e),_(!0)}),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("img",{src:B,alt:"Student photo",className:"w-32 h-32 rounded-full object-cover border"}),(i||r.photo_url)&&!z&&(0,t.jsx)(g.Button,{type:"button",variant:"outline",className:"text-red-600 border-red-400",onClick:()=>{n(null),h(null),T(!0)},children:"Remove Photo"}),(0,t.jsx)(p.FormLabel,{children:"Upload New Photo"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsxs)("label",{className:"cursor-pointer px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[l?l.name:"Upload Photo",(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t;let s=(null==(t=e.target.files)?void 0:t[0])||null;n(s),T(!1),h(s?URL.createObjectURL(s):null)},className:"hidden"})]})})]}),(0,t.jsx)(p.FormField,{control:k.control,name:"student_id",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"ID Number"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter ID number",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:k.control,name:"first_name",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"First Name"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter first name",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:k.control,name:"last_name",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Last Name"}),(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(v.Input,{placeholder:"Enter last name",...s})}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:k.control,name:"program_code",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Program"}),(0,t.jsxs)(f.Select,{onValueChange:s.onChange,value:s.value,disabled:L,children:[(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:L?"Loading programs...":"Select a program"})})}),(0,t.jsx)(f.SelectContent,{children:I.map(e=>(0,t.jsxs)(f.SelectItem,{value:e.program_code,children:[e.program_code," - ",e.program_name]},e.program_code))})]}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:k.control,name:"year_level",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Year Level"}),(0,t.jsxs)(f.Select,{onValueChange:s.onChange,value:s.value,children:[(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select year level"})})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"1",children:"1"}),(0,t.jsx)(f.SelectItem,{value:"2",children:"2"}),(0,t.jsx)(f.SelectItem,{value:"3",children:"3"}),(0,t.jsx)(f.SelectItem,{value:"4",children:"4"}),(0,t.jsx)(f.SelectItem,{value:"4+",children:"4+"})]})]}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(p.FormField,{control:k.control,name:"gender",render:e=>{let{field:s}=e;return(0,t.jsxs)(p.FormItem,{children:[(0,t.jsx)(p.FormLabel,{children:"Gender"}),(0,t.jsxs)(f.Select,{onValueChange:s.onChange,value:s.value,children:[(0,t.jsx)(p.FormControl,{children:(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select gender"})})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"Male",children:"Male"}),(0,t.jsx)(f.SelectItem,{value:"Female",children:"Female"}),(0,t.jsx)(f.SelectItem,{value:"Other",children:"Other"})]})]}),(0,t.jsx)(p.FormMessage,{})]})}}),(0,t.jsx)(x.DialogFooter,{children:(0,t.jsx)(g.Button,{type:"submit",children:"Save Changes"})})]})})]})]}),(0,t.jsx)(x.Dialog,{open:w,onOpenChange:_,children:(0,t.jsxs)(x.DialogContent,{className:"max-w-sm",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"Confirm Changes"}),(0,t.jsxs)(x.DialogDescription,{children:["Are you sure you want to update the student ",(0,t.jsxs)("strong",{children:[r.student_id," - ",r.last_name,", ",r.first_name]}),"?"]})]}),(0,t.jsxs)(x.DialogFooter,{className:"flex justify-end gap-2",children:[P&&(0,t.jsx)("p",{className:"text-red-600 text-sm font-medium",children:P}),(0,t.jsx)(g.Button,{variant:"outline",onClick:()=>{_(!1),C(null)},children:"Cancel"}),(0,t.jsxs)(g.Button,{onClick:()=>{F&&A(F)},disabled:L,children:[L&&(0,t.jsx)(u.Loader2,{className:"animate-spin h-4 w-4"}),L?"Loading...":"Confirm"]})]})]})})]})}var C=e.i(82137),L=e.i(12628);function N(e){let{student:s}=e,r=s.photo_url&&""!==s.photo_url.trim()?s.photo_url:"https://gromnlgzvpnkbzlvefrw.supabase.co/storage/v1/object/public/student_photos/defaultphoto.jpg";return(0,t.jsxs)(x.Dialog,{children:[(0,t.jsx)(x.DialogTrigger,{asChild:!0,className:"m-2",children:(0,t.jsx)("div",{children:"View"})}),(0,t.jsxs)(x.DialogContent,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(x.DialogHeader,{className:"text-center",children:(0,t.jsx)(x.DialogTitle,{className:"text-xl font-semibold",children:"Student Details"})}),(0,t.jsx)("div",{className:"flex justify-center my-4",children:(0,t.jsx)("div",{className:"h-32 w-32 rounded-full overflow-hidden border",children:(0,t.jsx)("img",{src:r,alt:"Student photo",className:"w-32 h-32 rounded-full object-cover border"})})}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["Student ID: ",s.student_id]})}),(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["First Name: ",s.first_name]})}),(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["Last Name: ",s.last_name]})}),(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["Gender: ",s.gender]})}),(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["Year Level: ",s.year_level]})}),(0,t.jsx)("div",{className:"grid gap-1",children:(0,t.jsxs)(L.Label,{children:["Program: ",s.program_code]})})]})]})]})}var I=e.i(50412),D=e.i(6648),P=e.i(57081);I.object({student_id:I.string().regex(/^\d{4}-\d{4}$/,"ID must be in YYYY-NNNN format"),first_name:I.string().min(1),last_name:I.string().min(1),program_code:I.string(),year_level:I.string(),gender:I.string()});let M=(0,s.createContext)(void 0);function z(e){let{children:r}=e,[a,n]=(0,s.useState)([]),o=async()=>{await l()};return(0,t.jsx)(M.Provider,{value:{students:a,fetchStudents:o},children:r})}function T(){let[e,a]=(0,s.useState)([]),[n,o]=(0,s.useState)(0),[d,c]=(0,s.useState)(0),[h]=(0,s.useState)(10),[m,u]=(0,s.useState)([]),[p,v]=(0,s.useState)(!0),[x,j]=(0,s.useState)("");(0,s.useEffect)(()=>{f(d*h)},[d,m,x]);let f=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;v(!0);try{var t,s;let r=(null==(t=m[0])?void 0:t.id)||"student_id",n=(null==(s=m[0])?void 0:s.desc)?"desc":"asc",i=await l({offset:e,limit:h,sortBy:r,orderBy:n,search:x});a(i.students.rows||[]),o(i.students.total),j(x)}catch(e){console.error("Failed to load students:",e)}finally{v(!1)}};return p?(0,t.jsx)("div",{children:"Loading students..."}):(0,t.jsx)(z,{children:(0,t.jsx)(r.DataTable,{columns:[{id:"student_photo",header:()=>(0,t.jsx)("div",{children:"Student Photo"}),size:80,minSize:80,meta:{label:"Student Photo",align:"center"},cell:e=>{let{row:s}=e,r=s.original,a="https://gromnlgzvpnkbzlvefrw.supabase.co/storage/v1/object/public/student_photos/defaultphoto.jpg",l=r.photo_url&&""!==r.photo_url.trim()?r.photo_url:a;return(0,t.jsx)("img",{src:l,alt:"".concat(r.first_name," ").concat(r.last_name),className:"w-12 h-12 rounded-full object-cover",onError:e=>{e.target.src=a}})}},{accessorKey:"student_id",size:140,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["ID Number",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"ID Number",align:"center"}},{accessorKey:"first_name",size:150,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["First Name",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"First Name",align:"center"}},{accessorKey:"last_name",size:150,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Last Name",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"Last Name",align:"center"}},{accessorKey:"program_code",size:120,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Program",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"Program",align:"center"},cell:e=>{let{row:t}=e,s=t.getValue("program_code");return s&&""!==s.trim()?s:"N/A"}},{accessorKey:"year_level",size:90,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Year Level",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"Year Level",align:"center"}},{accessorKey:"gender",size:90,header:e=>{let{column:s}=e;return(0,t.jsxs)(g.Button,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Gender",(0,t.jsx)(_.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})},meta:{label:"Gender",align:"center"}},{id:"actions",header:"Actions",size:70,meta:{align:"center"},cell:e=>{let{row:s}=e,r=s.original;return(0,t.jsxs)(D.DropdownMenu,{children:[(0,t.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:"flex items-center justify-center w-8 h-8 rounded-md hover:bg-gray-100",children:(0,t.jsx)(P.MoreHorizontal,{className:"h-5 w-5"})})}),(0,t.jsxs)(D.DropdownMenuContent,{align:"end",className:"w-40",children:[(0,t.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(N,{student:r})}),(0,t.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(F,{student:{...r,curr_code:r.student_id},onSuccess:f})}),(0,t.jsx)(D.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(C.DeleteDialog,{itemName:"".concat(r.student_id,": ").concat(r.last_name),onConfirm:async()=>await i(r),onSuccess:f})})]})]})}}],data:e,total:n,pageIndex:d,pageSize:h,sorting:m,onSortingChange:u,onSearch:e=>{c(0),j(e)},onPageChange:e=>{c(e)},actions:[{Component:w,props:{label:"Add Student",onSuccess:()=>f(d*h)}}]})})}}]);