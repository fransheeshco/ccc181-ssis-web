(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15679,e=>{"use strict";e.s(["AuthContext",()=>t,"useAuth",()=>s]);var r=e.i(60159);let t=(0,r.createContext)({user:null,isAuthenticated:!1,loading:!0,login:async()=>{},register:async()=>{},logout:async()=>{},refreshUser:async()=>{}}),s=()=>(0,r.useContext)(t)},47299,e=>{"use strict";e.s(["ClientAuthWrapper",()=>i],47299);var r=e.i(96922),t=e.i(60159),s=e.i(15679);let o=e.i(18489).default.create({baseURL:"http://localhost:8000/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),a=e=>{let{children:a}=e,[i,l]=(0,t.useState)(null),[n,u]=(0,t.useState)(!0),c=async()=>{try{let{data:e}=await o.post("/users/token/refresh");console.log("REFRESH RESPONSE DATA:",e),l(e.user)}catch(r){var e;(null==(e=r.response)?void 0:e.status)!==401&&console.error("Failed to refresh user session:",r),l(null)}finally{u(!1)}},d=async(e,r)=>{u(!0);try{await o.post("/users/login",{email:e,password:r}),await c()}catch(e){var t,s;if(console.error("Login failed:",e),(null==(t=e.response)?void 0:t.status)===401)throw Error("Invalid email or password");if((null==(s=e.response)?void 0:s.status)===400)throw Error("Invalid request data");throw Error("Login failed. Please try again.")}finally{u(!1)}},h=async(e,r,t)=>{u(!0);try{await o.post("/users/register",{username:e,email:r,password:t})}catch(e){var s,a;if(console.error("Register failed:",e),(null==(s=e.response)?void 0:s.status)===401)throw Error("Invalid email or password");if((null==(a=e.response)?void 0:a.status)===400)throw Error("Invalid request data");throw Error("Registration failed. Please try again.")}finally{u(!1)}},f=async()=>{u(!0);try{await o.post("/users/logout")}catch(e){console.error("Logout failed:",e)}finally{l(null),u(!1),window.location.href="/"}};return(0,t.useEffect)(()=>{c()},[]),(0,r.jsx)(s.AuthContext.Provider,{value:{user:i,isAuthenticated:!!i,loading:n,login:d,register:h,logout:f,refreshUser:c},children:a})};function i(e){let{children:t}=e;return(0,r.jsx)(a,{children:t})}}]);